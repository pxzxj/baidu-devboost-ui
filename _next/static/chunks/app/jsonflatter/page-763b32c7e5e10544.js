(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[449],{8043:function(e,t,n){Promise.resolve().then(n.bind(n,8637))},8637:function(e,t,n){"use strict";n.r(t);var r=n(7437),l=n(2265),i=n(4196),o=n(9226),s=n(8569),a=n(2034),c=n(7394),u=n(2343),d=n(4110),f=n(471),p=n(1423),h=n(6682),g=n(3187),y=n(7326),b=n.n(y),m=n(3781),j=n(8196);let O={columns:[{title:"Name",dataIndex:"name"}],data:[{key:"1",name:"Josh Long"}]};t.default=function(){let{TextArea:e}=o.default,[t,n]=(0,l.useState)(""),[y,F]=(0,l.useState)([{title:"ROOT",key:"ROOT",path:""}]),[v,w]=(0,l.useState)(O),[x,k]=(0,l.useState)({ignoreFields:[],flatFields:[],joinFields:[],mergeFields:[],camelToUnderscore:!0}),S=(0,l.useRef)(null),[P,E]=s.ZP.useMessage(),R=b()(x),N=[{key:"setRoot",label:"Set as rootField"},{key:"ignoreField",label:"IgnoreField"},{key:"mergeField",label:"MergeField"},{key:"flatField",label:"FlatField"},{key:"joinField",label:"JoinField"},{key:"unIgnoreField",label:"UnIgnoreField"},{key:"unMergeField",label:"UnMergeField"},{key:"unFlatField",label:"UnFlatField"},{key:"unJoinField",label:"UnJoinField"}],C=e=>{let t=null;try{t=JSON.parse(e)}catch(e){}if(null==t)return P.open({type:"error",content:"非法JSON"}),[{title:"ROOT",key:"ROOT",path:""}];let n=[{title:"ROOT",key:"ROOT",path:""}];return function e(t,n,l,i){if(t instanceof Array){if(n.icon=(0,r.jsx)(j.mBz,{}),t.length>0){let r=[];for(let n in t){let o=l+"."+n,s={title:n.toString(),key:o,path:i};e(t[n],s,o,i),r.push(s)}n.children=r}}else if(t instanceof Object){n.icon=(0,r.jsx)(m.rb6,{});let o=[];for(let n in t){let r=l+"."+n,s=i;""!=s&&(s+="."),s+=n;let a={title:n,key:r,path:s};e(t[n],a,r,s),o.push(a)}o.length>0&&(n.children=o)}else null!=t&&"string"==typeof t&&(t='"'+t+'"'),n.title+=": "+t}(t,n[0],"ROOT",""),n};function A(e,t,n,r){let l=r.ignoreFields,i=r.flatFields,o=r.joinFields;if(!l.includes(t)){if(e instanceof Array){if(o.includes(t)){if(e.length>0){if(e[0]instanceof Object){let l=[],i=new Set;for(let n in e){let o=e[n],s={};for(let e in A(o,t,s,r),l.push(s),s)i.add(e)}for(let e of i)n[e]=l.map(t=>t[e]).filter(e=>null!=e).join(", ")}else{let l=[];for(let n in e){let i=e[n],o={};for(let e in A(i,t,o,r),o)l.push(o[e])}n[t]=l.join(", ")}}}else throw P.open({type:"warning",content:t+" node type is array, it must be ignore or join"}),Error(t+" node type is array, it must be ignore or join")}else if(e instanceof Object){if(i.includes(t))for(let l in e)A(e[l],t+"."+l,n,r);else throw P.open({type:"warning",content:t+" node type is object, it must be ignore or flat"}),Error(t+" node type is object, it must be ignore or flat")}else n[t]=e}}return(0,r.jsxs)(c.Z,{wrap:"wrap",gap:"middle",vertical:!1,children:[E,(0,r.jsx)("div",{style:{width:"33%"},children:(0,r.jsx)(e,{value:t,onChange:e=>n(e.target.value),onBlur:()=>F(C(t)),autoSize:{minRows:10,maxRows:15}})}),(0,r.jsx)("div",{style:{width:"30%"},children:(0,r.jsx)(u.Z,{showIcon:!0,defaultExpandAll:!0,titleRender:e=>(0,r.jsx)(a.Z,{menu:{items:N,onClick:t=>{let{key:n}=t,r=e.path,{...l}=x;switch(n){case"setRoot":l.rootField=r;break;case"ignoreField":l.ignoreFields.push(r);break;case"mergeField":l.mergeFields.push(r);break;case"flatField":l.flatFields.push(r);break;case"joinField":l.joinFields.push(r);break;case"unIgnoreField":let i=l.ignoreFields.indexOf(r);-1!=i&&l.ignoreFields.splice(i,1);break;case"unMergeField":let o=l.mergeFields.indexOf(r);-1!=o&&l.mergeFields.splice(o,1);break;case"unFlatField":let s=l.flatFields.indexOf(r);-1!=s&&l.flatFields.splice(s,1);break;case"unJoinField":let a=l.joinFields.indexOf(r);-1!=a&&l.joinFields.splice(a,1)}k(l)}},trigger:["contextMenu"],children:(0,r.jsx)("span",{children:e.title})}),switcherIcon:(0,r.jsx)(i.Z,{}),treeData:y})}),(0,r.jsxs)("div",{style:{width:"33%"},children:[(0,r.jsx)(e,{value:R,autoSize:{minRows:9,maxRows:15}}),(0,r.jsx)(d.Z,{}),(0,r.jsxs)(f.Z,{children:[(0,r.jsx)("span",{children:"camelToUnderscore"}),(0,r.jsx)(p.Z,{defaultChecked:!0,onChange:e=>{let{...t}=x;t.camelToUnderscore=e,k(t)}}),(0,r.jsx)(h.ZP,{type:"primary",danger:!0,onClick:()=>{k({ignoreFields:[],flatFields:[],joinFields:[],mergeFields:[],camelToUnderscore:!0})},children:"Reset"}),(0,r.jsx)(h.ZP,{type:"primary",onClick:()=>{w(function(e,t){let n=JSON.parse(e),r=[],l=[];""!=t.rootField&&null!=t.rootField&&void 0!=t.rootField&&(r=t.rootField.split("."));try{(function e(t,n,r,l,i,o){if(0==r.length){if(t instanceof Array)for(let s in t)e(t[s],n,r,l,i,o);else if(t instanceof Object){let e={};for(let r in t){let l=r;""!=n&&(l=n+"."+r),A(t[r],l,e,o)}for(let t in i)e[t]=i[t];l.push(e)}else{let e={};for(let r in A(t,n,e,o),i)e[r]=i[r];l.push(e)}}else if(t instanceof Array)for(let s in t){let a=t[s],{...c}=i;e(a,n,r,l,c,o)}else if(t instanceof Object){!function(t,n,r,l,i){let o=i.mergeFields;for(let s in o){let a,c;let u=o[s];if(u.startsWith(t)&&(a=""!=t?-1!=(c=u.indexOf(".",t.length+1))?u.substring(t.length+1,c):u.substring(t.length+1):-1!=(c=u.indexOf("."))?u.substring(0,c):u)!=n){let n=[],o=l[a],s=[];-1!=c&&(s=u.substring(c+1).split("."));let d=t+"."+a;if(""==t&&(d=a),void 0!=o){if(e(o,d,s,n,{},i),1==n.length){let e=n[0];for(let t in e)r[t]=e[t]}else throw P.open({type:"warning",content:"merge field "+d+" cannot have multiple values!"}),Error("merge field "+d+" cannot have multiple values!")}else P.open({type:"warning",content:"merge field "+d+" not found!"})}}}(n,r[0],i,t,o);let s=t[r[0]];""!=n?n+="."+r[0]:n+=r[0],void 0!=s?e(s,n,r.slice(1,r.length),l,i,o):P.open({type:"warning",content:"jsonNode not found for path "+n})}else P.open({type:"warning",content:"traverse end, cause "+n+" is not array or object!"})})(n,"",r,l,{},t)}catch(e){console.error("捕获到异常：",e)}if(t.camelToUnderscore){let e=[];for(let t=0;t<l.length;t++){let n=l[t],r={};for(let e in n)r[function(e){let t=e.charAt(0);for(let i=1;i<e.length-1;i++){var n,r,l;n=e.charAt(i-1),r=e.charAt(i),l=e.charAt(i+1),/[a-z]/.test(n)&&/[A-Z]/.test(r)&&/[a-z]/.test(l)&&(t+="_"),t+=e.charAt(i)}return t+=e.charAt(e.length-1),t=t.toLowerCase().replaceAll(".","_")}(e)]=n[e];e.push(r)}l=e}let i=O;if(l.length>0){let e=[],t=[];for(let n in l){let r=l[n];for(let n in r)-1===t.indexOf(n)&&(t.push(n),e.push({title:n,dataIndex:n}));r.key=n.toString()}i={columns:e,data:l}}return i}(t,x)),S.current&&S.current.scrollIntoView({behavior:"smooth"})},children:"Flat"})]})]}),(0,r.jsx)("div",{ref:S,children:(0,r.jsx)(g.Z,{columns:v.columns,dataSource:v.data,pagination:!1})})]})}},1810:function(e,t,n){"use strict";n.d(t,{w_:function(){return u}});var r=n(2265),l={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},i=r.createContext&&r.createContext(l),o=["attr","size","title"];function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){var r,l;r=t,l=n[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(r))in e?Object.defineProperty(e,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[r]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e){return t=>r.createElement(d,s({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,n)=>r.createElement(t.tag,c({key:n},t.attr),e(t.child)))}(e.child))}function d(e){var t=t=>{var n,{attr:l,size:i,title:a}=e,u=function(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}(e,o),d=i||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",s({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,u,{className:n,style:c(c({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),a&&r.createElement("title",null,a),e.children)};return void 0!==i?r.createElement(i.Consumer,null,e=>t(e)):t(l)}}},function(e){e.O(0,[779,614,658,682,307,812,419,545,306,971,23,744],function(){return e(e.s=8043)}),_N_E=e.O()}]);